<!DOCTYPE html>
<html>

<head>
    <title>SocketsChat</title>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="index.css">
</head>

<body style="background-color: black;">
<ul style="list-style-type: none; font-size: 32px; color: white;" id="message_list"></ul>
<form style="  position: relative;padding: 15px 0 0;margin-top: 10px; width: 50%;" id="message_area" action="">
    <input style="font-family: inherit;width: 100%;border: 0;border-bottom: 2px solid gray;outline: 0;font-size: 1.3rem;color: white;padding: 7px 0;background: transparent;transition: border-color 0.2s;
  " id="text_area" autocomplete="off" />
    <button style="font-family: inherit;border: 2px solid gray;font-size: 1.3rem;color: white;padding: 7px 0;background: transparent;transition: border-color 0.2s;">Send</button>
</form>

<script>
    const socket = io();

    const username = window.prompt("Enter the username");
    socket.emit('new user', username);

    const messageForm = document.getElementById('message_area');
    const textInput = document.getElementById('text_area');

    messageForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (textInput.value) {socket.emit('new message', textInput.value);
            textInput.value = '';
        }
    });

    socket.on('send message', (data) => {
        const messageList = document.getElementById('message_list');
        const chatItem = document.createElement('li');
        chatItem.textContent = data.user + ': ' + data.message;
        messageList.appendChild(chatItem);
        window.scrollTo(0, document.body.scrollHeight);
    });
</script>

</body>

</html>